
@{
    ViewBag.Title = "HienThiSanPham";
}

@model List<WebBanGauBong.Models.Product>

<!-- Nội dung sản phẩm -->
<main class="mx-auto mb-4">
    <a href="#" class="link-index">
        <h3 class="mb-3"><b>@ViewBag.Ten</b></h3>
    </a>

    <img src="@Url.Content("~/Content/Images/" + ViewBag.Anh)" alt="thubong" class="rounded-4 mb-4" />

    <div class="row row-cols-5">
        <!-- Card  -->

        @foreach (var item in Model)
        {
            var firstImage = item.ProductImages.FirstOrDefault();
            var Size = item.ProductSize.ToList();

            <div class="col mb-4">
                @{
                    string priceTargetId = "price-" + item.ProductID;
                }
                <div class="card h-100" style="border:none;">
                    <div class="image-link">
                        <a href="@Url.Action("Detail", "Product", new {id = item.ProductID.Trim()})">
                            <img src="@Url.Content("~/Content/Images/" + firstImage.ImageURL)" class="card-img-top" alt="@item.ProductName">
                            <img src="@Url.Content("~/Content/Images/product-footer.jpg")" alt="khuyến mãi" class="w-100 rounded-bottom" height=35 />

                        </a>
                        <a href="@Url.Action("Detail", "Home", new{id = @item.ProductID})" class="btn rounded-4">
                            <i class="bi bi-bag-plus"></i> <span>Mua Ngay</span>
                        </a>
                    </div>

                    <div class="card-body">
                        <div class="size-scroll-container d-flex flex-nowrap overflow-auto mb-2">
                            <button type="button" class="btn btnSizeCard flex-shrink-0 active"
                                    data-price="@Size[0].Price.Value.ToString("N0")"
                                    data-target="#@priceTargetId"
                                    style="--bs-btn-padding-y: .22rem; --bs-btn-padding-x: .4rem; --bs-btn-font-size: .70rem;">
                                @Size[0].SizeName.ToString()<span>cm</span>
                            </button>

                            @foreach (var size in Size.Skip(1))
                            {
                                float s = float.Parse(size.SizeName.ToString());
                                string sizeName = s.ToString();
                                if (s >= 200)
                                {
                                    sizeName = "2m" + (s % 200).ToString();
                                }
                                else if (s >= 100)
                                {
                                    sizeName = "1m" + (s % 100).ToString();
                                }
                                else
                                {
                                    sizeName = s.ToString() + "cm";
                                }
                                <button type="button" class="btn btnSizeCard flex-shrink-0"
                                        data-price="@size.Price.Value.ToString("N0")"
                                        data-target="#@priceTargetId"
                                        style="--bs-btn-padding-y: .22rem; --bs-btn-padding-x: .4rem; --bs-btn-font-size: .70rem;">
                                    @sizeName
                                </button>
                            }
                        </div>

                        <h6 class="card-title"><a href="@Url.Action("Detail", "Product", new {id = item.ProductID.Trim()})">@item.ProductName</a></h6>
                        <p class="text-danger fw-bold text-color-theme" id="@priceTargetId">
                            @Size[0].Price.Value.ToString("N0")đ
                        </p>
                    </div>
                </div>
            </div>
        }

    </div>

    <center>
        <a href="#" class="btn rounded-pill px-5 py-3 text-center">
            XEM THÊM <i class="bi bi-chevron-right"></i>
        </a>
    </center>
</main>
